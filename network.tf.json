{
  "resource": {
    "oci_core_internet_gateway": {
      "main": {
        "compartment_id": "${oci_identity_compartment.platform.id}",
        "display_name": "${local.project}-internet-gateway",
        "vcn_id": "${oci_core_vcn.main.id}"
      }
    },
    "oci_core_nat_gateway": {
      "main": {
        "compartment_id": "${oci_identity_compartment.platform.id}",
        "display_name": "${local.project}-nat-gateway",
        "vcn_id": "${oci_core_vcn.main.id}"
      }
    },
    "oci_core_route_table": {
      "private": {
        "compartment_id": "${oci_identity_compartment.platform.id}",
        "display_name": "${local.project}-private-route-table",
        "route_rules": [
          {
            "destination": "0.0.0.0/0",
            "destination_type": "CIDR_BLOCK",
            "network_entity_id": "${oci_core_nat_gateway.main.id}"
          },
          {
            "destination": "${data.oci_core_services.all_services.services.0.cidr_block}",
            "destination_type": "SERVICE_CIDR_BLOCK",
            "network_entity_id": "${oci_core_service_gateway.main.id}"
          }
        ],
        "vcn_id": "${oci_core_vcn.main.id}"
      }
    },
    "oci_core_service_gateway": {
      "main": {
        "compartment_id": "${oci_identity_compartment.platform.id}",
        "display_name": "${local.project}-service-gateway",
        "services": [
          {
            "service_id": "${data.oci_core_services.all_services.services.0.id}"
          }
        ],
        "vcn_id": "${oci_core_vcn.main.id}"
      }
    },
    "oci_core_vcn": {
      "main": {
        "cidr_block": "10.0.0.0/16",
        "compartment_id": "${oci_identity_compartment.platform.id}",
        "display_name": "${local.project}-vcn",
        "dns_label": "${local.project}"
      }
    }
  }
}
